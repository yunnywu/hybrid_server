!function(t){function e(t){var e="";for(var i in t)e+=i+":"+t[i]+";";return e}window.xm=window.xm||{},xm.util=xm.util||{};var i=function(i,n){n=n||{};var o=t("#mToast"),r={div:{position:"fixed",bottom:"50px",left:"30px",right:"30px","text-align":"center"},span:{display:"inline-block","box-sizing":"border-box","background-color":"rgba(0,0,0,.7)",color:"#fff",padding:"5px 8px","max-width":"100%",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}};r.div=t.extend(r.div,n.style&&n.style.div),r.span=t.extend(r.span,n.style&&n.style.span);var a=t.extend({timeout:3e3,transitionTime:800,cls:"mtoast"},n);o.size()>0&&(clearTimeout(o.data("timer")),o.remove()),o=t('<div id="mToast" class="'+a.cls+'" style="'+e(r.div)+'"><span style="'+e(r.span)+'">'+i+"</span></div>"),t("body").append(o),o.fadeIn(a.transitionTime),o.data("timer",setTimeout(function(){o.fadeOut(a.transitionTime,function(){o.remove()})},a.timeout))};xm.util.toast=i}($),function(){function t(t,e,i,n){var o,r=null;return"function"!=typeof t||"number"!=typeof e?void console.log("Function <throttle> need at least two params, first with type `function` and second with type `number`"):(i||(i=1/0),function(){var a=[].slice.call(arguments),s=+new Date;clearTimeout(r),o||(o=s),s-o>i?(t.apply(n,a),o=s):r=setTimeout(function(){t.apply(n,a)},e)})}window.xm||(window.xm={}),xm.util||(xm.util={}),xm.util.throttle=t}(),function(){function t(t,e){var i,n,o,r,a;if(e||(e=0),"number"==typeof e)i=n=o=r=e;else{if("object"!=typeof e)return;i=e.top||0,n=e.right||0,o=e.bottom||0,r=e.left||0}return a=t.getBoundingClientRect(),window.innerHeight-a.top>i&&a.right>n&&a.bottom>o&&window.innerWidth-a.left>r}window.xm||(window.xm={}),xm.util||(xm.util={}),xm.util.inViewport=t}(),function(){function t(){}window.xm||(window.xm={}),xm.util||(xm.util={}),t.prototype.init=function(){this._handlers||(this._handlers={}),this._singles||(this._singles={})},t.prototype.on=function(t,e){return this._handlers||(this._handlers={}),this._handlers[t]=this._handlers[t]||[],this._handlers[t].push(e),this},t.prototype.once=function(t,e){return this._singles||(this._singles={}),this._singles[t]||(this._singles[t]=[]),this._singles[t].push(e),this},t.prototype.off=function(t,e){var i,n,o,r;return this._handlers||(this._handlers={}),this._singles||(this._singles={}),null!=e?(i=this._handlers[t],Array.isArray(i)&&-1!==(n=i.indexOf(e))&&i.splice(n,1),o=this._handlers[t],Array.isArray(o)&&-1!==(r=o.indexOf(e))&&o.splice(r,1)):(delete this._handlers[t],delete this._singles[t]),this},t.prototype.emit=function(t,e,i){var n,o,r,a;for(this._handlers||(this._handlers={}),this._singles||(this._singles={}),n=this._handlers[t],r=this._singles[t],o=n?n.length:0,a=r?r.length:0,Array.isArray(e)?e.unshift(t):e=[t,e];--o>-1;)n[o].apply(i,e);for(;a&&r.length;)r.pop().apply(i,e);return this},t.mixin=function(e){var i;for(i in t.prototype)"function"==typeof e?e.prototype[i]=t.prototype[i]:e[i]=t.prototype[i];return e},xm.util.MicroEvent=t}(),function(){function t(t){this.elements=t,this.current=[]}function e(t){this.opts=Object.assign({},e["default"],t||{}),this.targets={history:[]},this.scroller=this.opts.scroller||window,this.os=0,this.start()}"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var i=arguments[e];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}),window.xm||(window.xm={}),xm.util||(xm.util={});var i=xm.util.inViewport,n=xm.util.MicroEvent,o=xm.util.throttle;n.mixin(t),t.prototype.reset=function(t){return this.elements=t,this.current=[],this},t.prototype.check=function(t){return this.elements.forEach(function(e){var n,o;n=i(e,t),o=this.current.indexOf(e),n&&!~o&&(this.current.push(e),this.emit("enter",e)),!n&&~o&&(this.current.splice(o,1),this.emit("leave",e))}.bind(this)),this},e["default"]={delay:100,maxDelay:300,triggers:["scroll","resize","load"]},e.prototype.start=function(){var t=this.opts.triggers;this.monitor=o(this.check,this.opts.delay,this.opts.maxDelay,this),Array.isArray(t)&&t.forEach(function(t){"scroll"===t?this.scroller.addEventListener(t,this.monitor,!1):window.addEventListener(t,this.monitor,!1)}.bind(this))},e.prototype.end=function(){var t=this.opts.triggers;Array.isArray(t)&&t.forEach(function(t){"scroll"===t?this.scroller.removeEventListener(t,this.monitor,!1):window.removeEventListener(t,this.monitor,!1)}.bind(this))},e.prototype.check=function(){var t=this.targets,e=this.os;return t.history.forEach(function(i){t[i].check(e)}),this},e.prototype.watch=function(e){var i,n;if("string"==typeof e)return i=this.targets,n=[].slice.call(document.querySelectorAll(e)),~i.history.indexOf(e)?i[e].reset(n):(i[e]=new t(n),i.history.push(e)),i[e]},e.prototype.unwatch=function(t){var e,i,n;if("string"==typeof t)return e=this.targets,~e.history.indexOf(t)?(i=e[t],e[t]=null,n=e.history.indexOf(t),e.history.splice(n,1),i):null},e.prototype.watching=function(){return this.targets.history},e.prototype.offset=function(t){return null==t?this.os:(this.os=t,this)},e.prototype["in"]=function(t,e){return e=null==e?this.os:e,i(t,e)},xm.util.InView=e}(),function(){function t(t){return"number"==typeof t.length?[].slice.call(t):[t]}function e(t){return"[object Function]"===Object.prototype.toString.call(t)}function i(){}function n(e,r){this.list=e.jquery?e.get(0):t(e)[0],this.opts=Object.assign({},n["default"],r||{}),this.observer=new i,this.inview=new o(this.opts.inview||{}),this.index=l++,this._init()}"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var i=arguments[e];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}),window.xm||(window.xm={}),xm.util||(xm.util={});var o=xm.util.InView,r=xm.util.MicroEvent,a="xmlm-";r.mixin(i),i.prototype.observe=function(e){var i,n,o,r,a,s=this;if(i=window.MutationObserver||window.WebKitMutationObserver)n=new i(function(e){e.forEach(function(e){e.addedNodes&&e.addedNodes.length&&s.emit("listAdded",[t(e.addedNodes),e.target])})}),n.observe(e,{childList:!0}),o=function(){n.disconnect()};else{if(!window.MutationEvent)throw new Error("xm-loadMore is depand on `MutationObserver` or `MutationEvent` API, but both of them are invalid now.");r=t(e.children),a=function(e){var i,n;n=t(e.target.children),i=n.filter(function(t){return!~r.indexOf(t)}),r=n,s.emit("listAdded",[i,e.target])},e.addEventListener("DOMSubtreeModified",a,!1),o=function(){e.removeEventListener("DOMSubtreeModified",a,!1)}}return o};var s=a+"list-added",c=a+"load-triggered",l=0;n["default"]={itemTag:"li",triggerIndex:-2},r.mixin(n),n.prototype._init=function(){var t,e=this.opts.triggerIndex;this.triggerIndex=e>0?Math.abs(e-this.list.children.length-1):Math.abs(e),this.list.classList.add(a+"list"),this._iwTargetSelector=this.opts.itemTag+":nth-last-of-type("+this.triggerIndex+")",t=this._iwTarget=this.list.querySelector(this._iwTargetSelector),t&&t.setAttribute("data-"+a+"index",this.index),this._iwSelector=this.opts.itemTag+"[data-"+a+'index="'+this.index+'"]',this.start()},n.prototype.start=function(){return this._changeIwSelectorTag(),this._startObserver(),this._startViewer(),this},n.prototype._changeIwSelectorTag=function(){var t=this._iwTarget;t&&t.removeAttribute("data-"+a+"index"),t=this._iwTarget=this.list.querySelector(this._iwTargetSelector),t&&t.setAttribute("data-"+a+"index",this.index)},n.prototype._startObserver=function(){var t=this;this.observer.on("listAdded",function(e,i,n){i.length>0&&(t.emit(s,[i,n]),t._changeIwSelectorTag(),t._startViewer())}),this._clearObserver=this.observer.observe(this.list)},n.prototype._startViewer=function(){var t=this;this.inview.watch(this._iwSelector).off("enter").once("enter",function(e,i){t.emit(c,[i])}),this.inview.start()},n.prototype.end=function(){return this.clear(),this},n.prototype.check=function(){var t=this.list.querySelector(this._iwSelector);return this.inview["in"](t)&&this.emit(c,[t]),this},n.prototype.clear=function(){this.observer.off("listAdded"),e(this._clearObserver)&&this._clearObserver(),this.inview.unwatch(this._iwSelector),this.inview.end()},xm.util.loadMore=n}(),function(){function t(){var t,e=document.createElement("carousel"),i={},n={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"},o={webkitTransform:"webkitTransform",transform:"transform"};for(t in n)void 0!==e.style[t]&&(i.transition=t,i.transitionEnd=n[t]);for(t in o)void 0!==e.style[t]&&(i.transform=t);return i}function e(t,i){if(!s)throw new Error("The broswer doesn't support the dependence attribute `transition`");if(this.option=$.extend({},e["default"],i),this.container=$(t),this.items=this.container.children(),this.itemLength=this.items.length,this.itemLength<4)throw new Error("The number of swiper item must more than 3");this.init()}window.xm||(window.xm={}),xm.util||(xm.util={});var i=".xm-swiper { position: relative; width: 100%; margin: 20px 0px; padding: 0px 5%; white-space: nowrap; font-size: 0px; overflow: hidden; }.xm-swiper-item { position: absolute; display: none; top: 0px; width: 90%; padding: 0px 2%; overflow: hidden; transform: translate3d(0px, 0px, 0px); -webkit-transform: translate3d(0px, 0px, 0px); }.xm-swiper-item > div { background-color: white; border-radius: 4px; font-size: 30px; text-align: center; }.xm-swiper-item.xm-active, .xm-swiper-item.xm-left, .xm-swiper-item.xm-right, .xm-swiper-item.xm-prev-enter, .xm-swiper-item.xm-next-enter { display: block; }.xm-swiper-item.xm-prev-enter { transform: translate3d(-200%, 0px, 0px); -webkit-transform: translate3d(-200%, 0px, 0px); }.xm-swiper-item.xm-next-enter { transform: translate3d(200%, 0px, 0px); -webkit-transform: translate3d(200%, 0px, 0px); }.xm-swiper-item.xm-left { transform: translate3d(-100%, 0px, 0px); -webkit-transform: translate3d(-100%, 0px, 0px); }.xm-swiper-item.xm-right { transform: translate3d(100%, 0px, 0px); -webkit-transform: translate3d(100%, 0px, 0px); }.xm-swiper.xm-transition .xm-swiper-item { transition: transform 0.3s; -webkit-transition: transform 0.3s; }.xm-swiper.xm-prev .xm-swiper-item.xm-prev-enter { transform: translate3d(-100%, 0px, 0px); -webkit-transform: translate3d(-100%, 0px, 0px); }.xm-swiper.xm-prev .xm-swiper-item.xm-left { transform: translate3d(0px, 0px, 0px); -webkit-transform: translate3d(0px, 0px, 0px); }.xm-swiper.xm-prev .xm-swiper-item.xm-active { transform: translate3d(100%, 0px, 0px); -webkit-transform: translate3d(100%, 0px, 0px); }.xm-swiper.xm-prev .xm-swiper-item.xm-right { transform: translate3d(200%, 0px, 0px); -webkit-transform: translate3d(200%, 0px, 0px); }.xm-swiper.xm-next .xm-swiper-item.xm-next-enter { transform: translate3d(100%, 0px, 0px); -webkit-transform: translate3d(100%, 0px, 0px); }.xm-swiper.xm-next .xm-swiper-item.xm-left { transform: translate3d(-200%, 0px, 0px); -webkit-transform: translate3d(-200%, 0px, 0px); }.xm-swiper.xm-next .xm-swiper-item.xm-active { transform: translate3d(-100%, 0px, 0px); -webkit-transform: translate3d(-100%, 0px, 0px); }.xm-swiper.xm-next .xm-swiper-item.xm-right { transform: translate3d(0px, 0px, 0px); -webkit-transform: translate3d(0px, 0px, 0px); }",n="xm-",o={container:n+"swiper",item:n+"swiper-item",active:n+"active",left:n+"left",right:n+"right","prev-enter":n+"prev-enter","next-enter":n+"next-enter",transition:n+"transition",prev:n+"prev",next:n+"next"},r={container:"."+o.container,item:"."+o.item,active:"."+o.active,left:"."+o.left,right:"."+o.right,"prev-enter":"."+o["prev-enter"],"next-enter":"."+o["next-enter"],transition:"."+o.transition,prev:"."+o.prev,next:"."+o.next},a=t(),s=a.transition,c=a.transitionEnd,l=a.transform,u="ontouchstart"in document;e["default"]={extraClass:"",active:0,clickSwitch:!1,swipThreshold:60,transitionDuration:300},e.prototype={constructor:e,init:function(){var t=this.items,e=this.itemLength,i=parseInt(this.option.active,10);this.active=t.eq(i%e),this.left=t.eq((i-1+e)%e),this.right=t.eq((i+1)%e),this.container.addClass(o.container),this.container.addClass(this.option.extraClass),t.addClass(o.item),this.active.addClass(o.active),this.left.addClass(o.left),this.right.addClass(o.right),this.atachStyles(),this.bindEvents()},atachStyles:function(){var t=document.createElement("style");t.innerHTML=i,document.head.appendChild(t)},bindEvents:function(){var t=this,e=this.option,i=this.container;if(!e.clickSwitch&&u||i.on("click",r.left,function(e){e.preventDefault(),t.prev()}).on("click",r.right,function(e){e.preventDefault(),t.next()}),u){var n=sy=lx=ly=0;i.on("touchstart",function(t){var e=t.originalEvent.touches;i.hasClass(o.transition)||1!==e.length||(lx=n=e[0].clientX,ly=sy=e[0].clientY)}).on("touchmove",function(e){var r=e.originalEvent.touches;if(!i.hasClass(o.transition)&&1===r.length){var a,s,c,u,d,h,p;a=r[0].clientX,s=r[0].clientY,c=a-n,u=s-sy,Math.abs(c)>2*Math.abs(u)&&(h=c+"px",d="-100% + "+c+"px",p="100% + "+c+"px",t.active.get(0).style[l]="translate3d("+h+",0,0)",t.left.get(0).style[l]="translate3d(calc("+d+"),0,0)",t.right.get(0).style[l]="translate3d(calc("+p+"),0,0)",lx=a,ly=s,e.preventDefault())}}).on("touchend",function(r){var a=r.originalEvent.touches;if(!i.hasClass(o.transition)&&0===a.length){var s,l,u;s=lx-n,l=Math.abs(lx-n),u=Math.abs(ly-sy),u>=l||(l<e.swipThreshold?(t.active.removeAttr("style"),t.left.removeAttr("style"),t.right.removeAttr("style"),i.addClass(o.transition),t.active.on(c+".swiper",function(){clearTimeout(t.timer),i.removeClass(o.transition)}),t.timer=setTimeout(function(){i.trigger(c+".swiper")},e.transitionDuration)):0>s?t.step("next"):t.step("prev"))}})}},step:function(t){var e,i=this,n=this.container;"prev"===t?(e=this.left.prev(),e.length||(e=this.items.last())):"next"===t&&(e=this.right.next(),e.length||(e=this.items.first())),e.addClass(o[t+"-enter"]),n.width(),this.items.removeAttr("style"),n.addClass(o.transition+" "+o[t]),n.one(c+".swiper",function(){clearTimeout(i.timer),n.removeClass(o.transition+" "+o[t]),e.removeClass(o[t+"-enter"]),i.active.removeClass(o.active),i.left.removeClass(o.left),i.right.removeClass(o.right),"prev"===t?(i.right=i.active,i.active=i.left,i.left=e):"next"===t&&(i.left=i.active,i.active=i.right,i.right=e),i.active.addClass(o.active),i.left.addClass(o.left),i.right.addClass(o.right),i.container.trigger(t+".xm.swiper",[i])}),this.timer=setTimeout(function(){n.trigger(c+".swiper")},this.option.transitionDuration)}},$.fn.extend({xmSwiper:function(t){return this.each(function(i,n){null==n.dataset.xmSwiper&&(n.dataset.xmSwiper=!0,new e(n,t))})}}),xm.util.Swiper=e}(),function(){function t(t){return JSON.parse(t)}function e(t){return JSON.stringify(t)}function n(t){return encodeURIComponent(t)}function o(t){return decodeURIComponent(t)}function r(t){return n(e(t))}function a(e){return t(o(e))}function s(t,e){for(var i in e)t[i]=e[i];return console.log(t),t}function c(t,e){return Array.prototype.slice.call(t,e||0)}function l(t,e,i){Object.defineProperty(t,e,{get:i})}function u(t,e){return f++,callbackName="cb_"+f,m[callbackName]=function(){var i=c(arguments);t.apply(y,i),e||(m[callbackName]=null)},callbackName}function d(t){p&&document.documentElement.removeChild(p),p=document.createElement("iframe"),p.setAttribute("width",0),p.style.display="none",p.setAttribute("src",t),document.documentElement.appendChild(p),setTimeout(function(){p&&document.documentElement.removeChild(p),p=null},0)}function h(t){if(/iting/i.test(v)){var e=c(arguments,1),i=e[e.length-1],n=!0,o="ios"==g,r=-1!==t.indexOf("_async"),a=-1!==t.indexOf("_long");if(t=t.replace(/(_async|_long)/g,""),"function"!=typeof i?(n=!1,void 0===i&&(e=e.slice(0,e.length-1))):e=e.slice(0,e.length-1),o||r){var s="null";n&&(s=u(i,a))}if(o){var l="jscall://"+t+"&"+s;try{v.match(/iphone os (\d+\_\d+(\_\d+)*)/)[1].split("_")[0]>=10&&(l=l.replace(/^(jscall:\/\/)/,"$1xmly?"))}catch(h){}if(e)for(var p in e)l+="&"+e[p];d(l)}else{var m=window.jscall[t];if(r)e.unshift(s),m.apply(window.jscall,e);else{var f=m.apply(window.jscall,e);n&&i(f)}}}}var p,m={},f=0,v=navigator.userAgent.toLowerCase(),g=window.jscall?"android":"ios",y={_schemeList:{"default":"iting","com.gemd.iting":"itinggemd","com.qndzq.book":"itingqndzq","com.jima.yijingtingshu":"itingjima"},isAndroid:"android"==g,isIos:"ios"==g,setScheme:function(t){this._schemeList.hasOwnProperty(t)?this.device.scheme=this._schemeList[t]:this.device.scheme=this._schemeList["default"]},device:{name:"",version:"",platformVersion:"",uuid:"",uid:"",token:"",scheme:"iting"},registModule:function(t,e){var i=this;l(e,"$ref",function(){return i}),l(i,t,function(){return e})},toast:function(t){h("notificationToast",n(t))},copy:function(t){h("copy",n(t))},closeWebView:function(){h("closeWebView")},browse:function(t){h("browse",n(t))},login:function(e){h("login_async",function(i){e&&e.call(this,t(i))})},dLogin:function(e){h("dLogin_async",function(i){e&&e.call(this,t(i))})},getNetworkStatus:function(e){h("getNetworkStatus_async",function(i){e&&e.call(this,t(i))})},getVersion:function(){return this.device.version||v.match(/(kdtunion_iting|iting)\/(\d(\.\d{1,3}){2,3})/)[2]},compareVersion:function(t,e){var i=(e||this.getVersion()).split("."),n=(t||"0.0.0").split("."),o=0,r=null,a=function(t,e){var i=parseInt(t,10),n=parseInt(e,10);return i===n?0:i>n?1:-1};return function(t,e){var i=t[o],n=e[o];return!n&&i?void(r=1):!i&&n?void(r=-1):i&&n?0!==a(i,n)?void(r=a(i,n)):(r=0,o++,(e[o]||t[o])&&arguments.callee(t,e),void 0):void(r=0)}(n,i),r},ready:function(t){var e=this;h("appReady",function(i){var n=e.device;i=JSON.parse(i),n.platformVersion=i.platformVersion,n.name=window.jscall?"android":"ios",n.platform=i.platform,n.version=i.version,n.uuid=i.deviceId,n.uid=i.uid,n.token=i.token,n.idfa=i.idfa||"",t.call(e,n)})},config:function(t,e){h("config_async",r(this._wrapFn(t)),function(t){e&&e.call(this,a(t))})},onShare:function(t){t===!1?h("onShare"):h("onShare_async",function(){t&&t.call(this)})},share:function(t,e){h("share_async",r(t),function(t){e&&e.call(this,a(t))})},multiShare:function(t,e){h("multiShare_async",r(t),function(t){e&&e.call(this,a(t))})},_wrapFn:function(t,e){var i=!0;if("boolean"!=typeof e||e||(i=!1),"function"==typeof t)return u(t,i);if("object"==typeof t)for(var n in t)t[n]=this._wrapFn(t[n],e);return t},notify:function(t){h("notifyApp",r(t))},getScheme:function(t,e){var i=this.device.scheme,n=this.paramStr(e);return n.length>0&&(n="&"+n),i+"://open?msg_type="+t+n},open:function(t){/:\/\/open/.test(t)||(t=this.getScheme.apply(this,arguments)),d(t)},paramStr:function(t){var e="",i=null;if(t)for(var o in t)i=t[o],null!=i&&void 0!=i&&(e+="&"+n(o)+"="+n(i));return e.length>0?e.substring(1):""},cookie:function(i,r,a){if(0==arguments.length){var s=this.getQueryParam(null,document.cookie,";");for(var c in s){s[c]=o(s[c]);try{s[c]=t(s[c])}catch(l){}}return s}if(1==arguments.length){var u=o(this.getQueryParam(i,document.cookie,";"));try{return t(u)}catch(l){return u}}else{var d;a=a||{},null==r&&(a.expires=-1),"object"==typeof r&&(r=e(r)),a.expires&&(d=new Date,d.setTime(d.getTime()+1e3*a.expires)),document.cookie=i+"="+n(r)+(a.domain?"; domain="+a.domain:"")+(a.path?"; path="+a.path:"")+(d?"; expires="+d.toUTCString():"")+(a.secure?"; secure":"")}},getQueryParam:function(t,e,i){var n={},o=e||window.location.search.substring(1),r=o.split(i||"&");for(var a in r){var s=r[a].match(/^\s*([%\w]+)=(.*)$/);try{n[s[1]]=s[2]}catch(c){}}return t?n[t]:n},addExtralParam:function(t,e){var e=e||location.href,i=/\?(.[^#]*)/,n="",o={};return(n=e.match(i))?(o=s(this.getQueryParam(null,n[1]),t),e.replace(n[1],this.paramStr(o))):(n=this.paramStr(t),e.indexOf("#")>-1?e.replace(/(#.*)$/,"?"+n+"$1"):e+"?"+n)}};y.registModule("activity",{shareSound:function(t,e,i){h("appShareSound",t,e,i)},shareActivity:function(t,e){h("appShareActivity",t,e)},shareVote:function(t,e,i){h("appShareVote",t,e,i)}}),y.registModule("audio",{play:function(t,e){h("audioPlay",t,function(){e&&e.call(y)})},pause:function(t){h("audioPause",function(){t&&t.call(y)})},playHead:function(t,e){h("playHead_async",r(t),function(t){e&&e.call(this,a(t))})}}),y.registModule("baichuan",{jump:function(t,e){h("bcJump_async",r(t),e)}}),y.registModule("coupon",{useCoupon:function(t){h("useCoupon",t)},shareForCoupon:function(t,e){h("shareForCoupon_async",r(t),function(t){e&&e.call(this,a(t))})}}),y.registModule("image",{captureImage:function(t,e,i){h("captureImage_async",t,e,i)},chooseImage:function(e,i){h("chooseImage_async",r(e),function(e){cb&&cb.call(this,t(data))})},saveImage:function(t){h("saveImage",n(t))}}),y.registModule("payment",{getChannels:function(e){h("getSupportPayType",function(i){e&&e.call(y,t(i))})},pay:function(t,e,i){var n=i,o="xmpay";"string"==typeof e?o=e:n=e,"xmpay"==o?this._xmPay(t,n):"applePay"==o?this._applePay(t,n):this._thirdPay(t,n)},_thirdPay:function(t,e){var i=this.$ref,n="appPay";i.compareVersion("5.4.75")<=0&&(n+="_async"),h(n,r(t),function(i){var n=a(i);n.data=t,e&&e.call(y,n)})},_xmPay:function(t,e){h("xmPay_async",n(t),function(t){e&&e.call(y,o(t))})},_applePay:function(t,e){h("applePay_async",n(t),function(t){e&&e.call(y,o(t))})},payFinished:function(t){t&&this.$ref.compareVersion("4.3.8")<0?h("payFinished",e(t)):h("payFinished")}}),y.registModule("game",{getApkStatus:function(t,e){h("getApkStatus_async_long",r(t),function(t){e&&e.call(this,a(t))})},downloadApk:function(t,e){h("downloadApk_async",r(t),function(t){e&&e.call(this,a(t))})},installApk:function(t,e){h("installApk_async",r(t),function(t){e&&e.call(this,a(t))})},launchApk:function(t,e){h("launchApk_async",r(t),function(t){e&&e.call(this,a(t))})},pauseDownLoad:function(t,e){h("pauseDownLoad_async",r(t),function(t){e&&e.call(this,a(t))})},resumeDownload:function(t,e){h("resumeDownload_async",r(t),function(t){e&&e.call(this,a(t))})}}),y.registModule("recorder",{recorderEvents:{},addRecordText:function(t,e){h("addRecordText_async",r(t),function(){e&&e.apply(this,arguments)})},startRecord:function(t){h("startRecord_async",function(){t&&t.apply(this,arguments)})},pauseRecord:function(t){h("pauseRecord_async",function(){t&&t.apply(this,arguments)})},resumeRecord:function(t,e){h("resumeRecord_async",t,function(){e&&e.apply(this,arguments)})},stopRecord:function(t){h("stopRecord_async",function(){t&&t.apply(this,arguments)})},playVoice:function(t,e){h("playVoice_async",t,function(){e&&e.apply(this,arguments)})},pauseVoice:function(t,e){h("pauseVoice_async",t,function(){e&&e.apply(this,arguments)})},resumeVoice:function(t,e){h("resumeVoice_async",t,function(){e&&e.apply(this,arguments)})},stopVoice:function(t,e){h("stopVoice_async",t,function(){e&&e.apply(this,arguments)})},getUploadProgress:function(t,e){h("getUploadProgress_async",t,function(){e&&e.apply(this,arguments)})},uploadVoice:function(t,e,i,n){h("uploadVoice_async",t,e,i,function(){n&&n.apply(this,arguments)})},_addEvent:function(t,e){var i=this;i.recorderEvents[t]=e,l(this,t,function(){return i.recorderEvents[t].bind(i.$ref)})},bind:function(t,e){if("object"==typeof t)for(i in t)this._addEvent(i,t[i]);else"string"==typeof t&&this._addEvent(t,e)}});var x={onAudioStatusChange:function(t){var e,i=JSON.parse(t);document.createEvent?(e=document.createEvent("CustomEvent"),e.initCustomEvent("audioStatusChange",!0,!0,i),document.dispatchEvent(e)):(e=document.createEventObject(),e.eventType="audioStatusChange",e.detail=i,document.fireEvent("on"+e.eventType,e))},getTitle:function(){var t=document.getElementsByTagName("title")[0],e=t.innerText;return window.jscall&&window.jscall.getTitle?void window.jscall.getTitle(e):e},redirectTo:function(t){window.location.href=t},resizeWin:function(){window.resizeBy(0,0)},getCookie:function(t){var e=y.cookie(t)||"",i={};return i[t]=e,window.jscall&&window.jscall.passCookie?void window.jscall.passCookie(r(i)):e},paySuccess:function(e){var i=t(e),n=y.getQueryParam("fromUrl");return n&&(window.config.paySuccessPage=o(n)),i.status?window.location.href=(window.config.paySuccessPage||"/ting-shang-mobile-web/v1/user/order")+"?orderNo="+i.orderId+"&device="+y.device.name+"&version="+y.device.version:y.toast("支付失败"),""}};y.recorder&&l(x,"recorder",function(){return y.recorder}),window.ya=y,window.nativeCallBack=m,window.nativeCall=x}(),!function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(function(){return e(t)}):e(t,!0)}(this,function(t,e){function i(e,i,n){t.WeixinJSBridge?WeixinJSBridge.invoke(e,o(i),function(t){s(e,t,n)}):u(e,n)}function n(e,i,n){t.WeixinJSBridge?WeixinJSBridge.on(e,function(t){n&&n.trigger&&n.trigger(t),s(e,t,i)}):n?u(e,n):u(e,i)}function o(t){return t=t||{},t.appId=C.appId,t.verifyAppId=C.appId,t.verifySignType="sha1",t.verifyTimestamp=C.timestamp+"",t.verifyNonceStr=C.nonceStr,t.verifySignature=C.signature,t}function r(t){return{timeStamp:t.timestamp+"",nonceStr:t.nonceStr,"package":t["package"],paySign:t.paySign,signType:t.signType||"SHA1"}}function a(t){return t.postalCode=t.addressPostalCode,delete t.addressPostalCode,t.provinceName=t.proviceFirstStageName,delete t.proviceFirstStageName,t.cityName=t.addressCitySecondStageName,delete t.addressCitySecondStageName,t.countryName=t.addressCountiesThirdStageName,delete t.addressCountiesThirdStageName,t.detailInfo=t.addressDetailInfo,delete t.addressDetailInfo,t}function s(t,e,i){"openEnterpriseChat"==t&&(e.errCode=e.err_code),delete e.err_code,delete e.err_desc,delete e.err_detail;var n=e.errMsg;n||(n=e.err_msg,delete e.err_msg,n=c(t,n),e.errMsg=n),i=i||{},i._complete&&(i._complete(e),delete i._complete),n=e.errMsg||"",C.debug&&!i.isInnerInvoke&&alert(JSON.stringify(e));var o=n.indexOf(":"),r=n.substring(o+1);switch(r){case"ok":i.success&&i.success(e);break;case"cancel":i.cancel&&i.cancel(e);break;default:i.fail&&i.fail(e)}i.complete&&i.complete(e)}function c(t,e){var i=t,n=v[i];n&&(i=n);var o="ok";if(e){var r=e.indexOf(":");o=e.substring(r+1),"confirm"==o&&(o="ok"),"failed"==o&&(o="fail"),-1!=o.indexOf("failed_")&&(o=o.substring(7)),-1!=o.indexOf("fail_")&&(o=o.substring(5)),o=o.replace(/_/g," "),o=o.toLowerCase(),("access denied"==o||"no permission to execute"==o)&&(o="permission denied"),"config"==i&&"function not exist"==o&&(o="ok"),""==o&&(o="fail")}return e=i+":"+o}function l(t){if(t){for(var e=0,i=t.length;i>e;++e){var n=t[e],o=f[n];o&&(t[e]=o)}return t}}function u(t,e){if(!(!C.debug||e&&e.isInnerInvoke)){var i=v[t];i&&(t=i),e&&e._complete&&delete e._complete,console.log('"'+t+'",',e||"")}}function d(t){if(!(b||_||C.debug||"6.0.2">T||E.systemType<0)){var e=new Image;E.appId=C.appId,E.initTime=I.initEndTime-I.initStartTime,E.preVerifyTime=I.preVerifyEndTime-I.preVerifyStartTime,P.getNetworkType({isInnerInvoke:!0,success:function(t){E.networkType=t.networkType;var i="https://open.weixin.qq.com/sdk/report?v="+E.version+"&o="+E.isPreVerifyOk+"&s="+E.systemType+"&c="+E.clientVersion+"&a="+E.appId+"&n="+E.networkType+"&i="+E.initTime+"&p="+E.preVerifyTime+"&u="+E.url;e.src=i}})}}function h(){return(new Date).getTime()}function p(e){k&&(t.WeixinJSBridge?e():g.addEventListener&&g.addEventListener("WeixinJSBridgeReady",e,!1))}function m(){P.invoke||(P.invoke=function(e,i,n){t.WeixinJSBridge&&WeixinJSBridge.invoke(e,o(i),n)},P.on=function(e,i){t.WeixinJSBridge&&WeixinJSBridge.on(e,i)})}if(!t.jWeixin){var f={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},v=function(){var t={};for(var e in f)t[f[e]]=e;return t}(),g=t.document,y=g.title,x=navigator.userAgent.toLowerCase(),w=navigator.platform.toLowerCase(),b=!(!w.match("mac")&&!w.match("win")),_=-1!=x.indexOf("wxdebugger"),k=-1!=x.indexOf("micromessenger"),M=-1!=x.indexOf("android"),S=-1!=x.indexOf("iphone")||-1!=x.indexOf("ipad"),T=function(){var t=x.match(/micromessenger\/(\d+\.\d+\.\d+)/)||x.match(/micromessenger\/(\d+\.\d+)/);return t?t[1]:""}(),I={initStartTime:h(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},E={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:S?1:M?2:-1,clientVersion:T,url:encodeURIComponent(location.href)},C={},A={_completes:[]},L={state:0,data:{}};p(function(){I.initEndTime=h()});var j=!1,O=[],P={config:function(t){C=t,u("config",t);var e=C.check!==!1;p(function(){if(e)i(f.config,{verifyJsApiList:l(C.jsApiList)},function(){A._complete=function(t){I.preVerifyEndTime=h(),L.state=1,L.data=t},A.success=function(t){E.isPreVerifyOk=0},A.fail=function(t){A._fail?A._fail(t):L.state=-1};var t=A._completes;return t.push(function(){d()}),A.complete=function(e){for(var i=0,n=t.length;n>i;++i)t[i]();A._completes=[]},A}()),I.preVerifyStartTime=h();else{L.state=1;for(var t=A._completes,n=0,o=t.length;o>n;++n)t[n]();A._completes=[]}}),C.beta&&m()},ready:function(t){0!=L.state?t():(A._completes.push(t),!k&&C.debug&&t())},error:function(t){"6.0.2">T||(-1==L.state?t(L.data):A._fail=t)},checkJsApi:function(t){var e=function(t){var e=t.checkResult;for(var i in e){var n=v[i];n&&(e[n]=e[i],delete e[i])}return t};i("checkJsApi",{jsApiList:l(t.jsApiList)},function(){return t._complete=function(t){if(M){var i=t.checkResult;i&&(t.checkResult=JSON.parse(i))}t=e(t)},t}())},onMenuShareTimeline:function(t){n(f.onMenuShareTimeline,{complete:function(){i("shareTimeline",{title:t.title||y,desc:t.title||y,img_url:t.imgUrl||"",link:t.link||location.href,type:t.type||"link",data_url:t.dataUrl||""},t)}},t)},onMenuShareAppMessage:function(t){n(f.onMenuShareAppMessage,{complete:function(){i("sendAppMessage",{title:t.title||y,desc:t.desc||"",link:t.link||location.href,img_url:t.imgUrl||"",type:t.type||"link",data_url:t.dataUrl||""},t)}},t)},onMenuShareQQ:function(t){n(f.onMenuShareQQ,{complete:function(){i("shareQQ",{title:t.title||y,desc:t.desc||"",img_url:t.imgUrl||"",link:t.link||location.href},t)}},t)},onMenuShareWeibo:function(t){n(f.onMenuShareWeibo,{complete:function(){i("shareWeiboApp",{title:t.title||y,desc:t.desc||"",img_url:t.imgUrl||"",link:t.link||location.href},t)}},t)},onMenuShareQZone:function(t){n(f.onMenuShareQZone,{complete:function(){i("shareQZone",{title:t.title||y,desc:t.desc||"",img_url:t.imgUrl||"",link:t.link||location.href},t)}},t)},startRecord:function(t){i("startRecord",{},t)},stopRecord:function(t){i("stopRecord",{},t)},onVoiceRecordEnd:function(t){n("onVoiceRecordEnd",t)},playVoice:function(t){i("playVoice",{localId:t.localId},t)},pauseVoice:function(t){i("pauseVoice",{localId:t.localId},t)},stopVoice:function(t){i("stopVoice",{localId:t.localId},t)},onVoicePlayEnd:function(t){n("onVoicePlayEnd",t)},uploadVoice:function(t){i("uploadVoice",{localId:t.localId,isShowProgressTips:0==t.isShowProgressTips?0:1},t)},downloadVoice:function(t){i("downloadVoice",{serverId:t.serverId,isShowProgressTips:0==t.isShowProgressTips?0:1},t)},translateVoice:function(t){i("translateVoice",{localId:t.localId,isShowProgressTips:0==t.isShowProgressTips?0:1},t)},chooseImage:function(t){i("chooseImage",{scene:"1|2",count:t.count||9,sizeType:t.sizeType||["original","compressed"],sourceType:t.sourceType||["album","camera"]},function(){return t._complete=function(t){if(M){var e=t.localIds;e&&(t.localIds=JSON.parse(e))}},t}())},getLocation:function(t){},previewImage:function(t){i(f.previewImage,{current:t.current,urls:t.urls},t)},uploadImage:function(t){i("uploadImage",{localId:t.localId,isShowProgressTips:0==t.isShowProgressTips?0:1},t)},downloadImage:function(t){
i("downloadImage",{serverId:t.serverId,isShowProgressTips:0==t.isShowProgressTips?0:1},t)},getLocalImgData:function(t){j===!1?(j=!0,i("getLocalImgData",{localId:t.localId},function(){return t._complete=function(t){if(j=!1,O.length>0){var e=O.shift();wx.getLocalImgData(e)}},t}())):O.push(t)},getNetworkType:function(t){var e=function(t){var e=t.errMsg;t.errMsg="getNetworkType:ok";var i=t.subtype;if(delete t.subtype,i)t.networkType=i;else{var n=e.indexOf(":"),o=e.substring(n+1);switch(o){case"wifi":case"edge":case"wwan":t.networkType=o;break;default:t.errMsg="getNetworkType:fail"}}return t};i("getNetworkType",{},function(){return t._complete=function(t){t=e(t)},t}())},openLocation:function(t){i("openLocation",{latitude:t.latitude,longitude:t.longitude,name:t.name||"",address:t.address||"",scale:t.scale||28,infoUrl:t.infoUrl||""},t)},getLocation:function(t){t=t||{},i(f.getLocation,{type:t.type||"wgs84"},function(){return t._complete=function(t){delete t.type},t}())},hideOptionMenu:function(t){i("hideOptionMenu",{},t)},showOptionMenu:function(t){i("showOptionMenu",{},t)},closeWindow:function(t){t=t||{},i("closeWindow",{},t)},hideMenuItems:function(t){i("hideMenuItems",{menuList:t.menuList},t)},showMenuItems:function(t){i("showMenuItems",{menuList:t.menuList},t)},hideAllNonBaseMenuItem:function(t){i("hideAllNonBaseMenuItem",{},t)},showAllNonBaseMenuItem:function(t){i("showAllNonBaseMenuItem",{},t)},scanQRCode:function(t){t=t||{},i("scanQRCode",{needResult:t.needResult||0,scanType:t.scanType||["qrCode","barCode"]},function(){return t._complete=function(t){if(S){var e=t.resultStr;if(e){var i=JSON.parse(e);t.resultStr=i&&i.scan_code&&i.scan_code.scan_result}}},t}())},openAddress:function(t){i(f.openAddress,{},function(){return t._complete=function(t){t=a(t)},t}())},openProductSpecificView:function(t){i(f.openProductSpecificView,{pid:t.productId,view_type:t.viewType||0,ext_info:t.extInfo},t)},addCard:function(t){for(var e=t.cardList,n=[],o=0,r=e.length;r>o;++o){var a=e[o],s={card_id:a.cardId,card_ext:a.cardExt};n.push(s)}i(f.addCard,{card_list:n},function(){return t._complete=function(t){var e=t.card_list;if(e){e=JSON.parse(e);for(var i=0,n=e.length;n>i;++i){var o=e[i];o.cardId=o.card_id,o.cardExt=o.card_ext,o.isSuccess=!!o.is_succ,delete o.card_id,delete o.card_ext,delete o.is_succ}t.cardList=e,delete t.card_list}},t}())},chooseCard:function(t){i("chooseCard",{app_id:C.appId,location_id:t.shopId||"",sign_type:t.signType||"SHA1",card_id:t.cardId||"",card_type:t.cardType||"",card_sign:t.cardSign,time_stamp:t.timestamp+"",nonce_str:t.nonceStr},function(){return t._complete=function(t){t.cardList=t.choose_card_info,delete t.choose_card_info},t}())},openCard:function(t){for(var e=t.cardList,n=[],o=0,r=e.length;r>o;++o){var a=e[o],s={card_id:a.cardId,code:a.code};n.push(s)}i(f.openCard,{card_list:n},t)},consumeAndShareCard:function(t){i(f.consumeAndShareCard,{consumedCardId:t.cardId,consumedCode:t.code},t)},chooseWXPay:function(t){i(f.chooseWXPay,r(t),t)},openEnterpriseRedPacket:function(t){i(f.openEnterpriseRedPacket,r(t),t)},startSearchBeacons:function(t){i(f.startSearchBeacons,{ticket:t.ticket},t)},stopSearchBeacons:function(t){i(f.stopSearchBeacons,{},t)},onSearchBeacons:function(t){n(f.onSearchBeacons,t)},openEnterpriseChat:function(t){i("openEnterpriseChat",{useridlist:t.userIds,chatname:t.groupName},t)}},V=1,N={};return g.addEventListener("error",function(t){if(!M){var e=t.target,i=e.tagName,n=e.src;if("IMG"==i||"VIDEO"==i||"AUDIO"==i||"SOURCE"==i){var o=-1!=n.indexOf("wxlocalresource://");if(o){t.preventDefault(),t.stopPropagation();var r=e["wx-id"];if(r||(r=V++,e["wx-id"]=r),N[r])return;N[r]=!0,wx.ready(function(){wx.getLocalImgData({localId:n,success:function(t){e.src=t.localData}})})}}}},!0),g.addEventListener("load",function(t){if(!M){var e=t.target,i=e.tagName;if(e.src,"IMG"==i||"VIDEO"==i||"AUDIO"==i||"SOURCE"==i){var n=e["wx-id"];n&&(N[n]=!1)}}},!0),e&&(t.wx=t.jWeixin=P),P}}),function(){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var i=t[e];window.requestAnimationFrame=window[i+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var n=0;window.requestAnimationFrame=function(t){var e=Date.now(),i=Math.max(n+16,e);return setTimeout(function(){t(n=i)},i-e)},window.cancelAnimationFrame=clearTimeout}}(),function(){function t(t,e,i){t.addEventListener(e,i,!1)}function e(t){return Math.sqrt(1-Math.pow(t-1,2))}function i(t){return 1-Math.sqrt(1-t*t)}function n(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1}var o=function(e){this.element="string"==typeof e.touch?document.querySelector(e.touch):e.touch,this.target=this._getValue(e.target,this.element),this.vertical=this._getValue(e.vertical,!0),this.property=e.property,this.tickID=0,this.initialValue=this._getValue(e.initialValue,this.target[this.property]),this.target[this.property]=this.initialValue,this.fixed=this._getValue(e.fixed,!1),this.sensitivity=this._getValue(e.sensitivity,1),this.moveFactor=this._getValue(e.moveFactor,1),this.factor=this._getValue(e.factor,1),this.outFactor=this._getValue(e.outFactor,.3),this.min=e.min,this.max=e.max,this.deceleration=6e-4,this.maxRegion=this._getValue(e.maxRegion,600),this.springMaxRegion=this._getValue(e.springMaxRegion,60),this.maxSpeed=e.maxSpeed,this.hasMaxSpeed=!(void 0===this.maxSpeed),this.lockDirection=this._getValue(e.lockDirection,!0);var i=function(){};if(this.change=e.change||i,this.touchEnd=e.touchEnd||i,this.touchStart=e.touchStart||i,this.touchMove=e.touchMove||i,this.touchCancel=e.touchCancel||i,this.reboundEnd=e.reboundEnd||i,this.animationEnd=e.animationEnd||i,this.correctionEnd=e.correctionEnd||i,this.tap=e.tap||i,this.pressMove=e.pressMove||i,this.preventDefault=this._getValue(e.preventDefault,!0),this.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},this.hasMin=!(void 0===this.min),this.hasMax=!(void 0===this.max),this.hasMin&&this.hasMax&&this.min>this.max)throw"the min value can't be greater than the max value.";this.isTouchStart=!1,this.step=e.step,this.inertia=this._getValue(e.inertia,!0),this._calculateIndex(),this.eventTarget=window,e.bindSelf&&(this.eventTarget=this.element),this._moveHandler=this._move.bind(this),t(this.element,"touchstart",this._start.bind(this)),t(this.eventTarget,"touchend",this._end.bind(this)),t(this.eventTarget,"touchcancel",this._cancel.bind(this)),this.eventTarget.addEventListener("touchmove",this._moveHandler,{passive:!1,capture:!1}),this.x1=this.x2=this.y1=this.y2=null};o.prototype={_getValue:function(t,e){return void 0===t?e:t},_start:function(t){this.isTouchStart=!0,this.touchStart.call(this,t,this.target[this.property]),cancelAnimationFrame(this.tickID),this._calculateIndex(),this.startTime=(new Date).getTime(),this.x1=this.preX=t.touches[0].pageX,this.y1=this.preY=t.touches[0].pageY,this.start=this.vertical?this.preY:this.preX,this._firstTouchMove=!0,this._preventMove=!1},_move:function(t){if(this.isTouchStart){var e=t.touches.length,i=t.touches[0].pageX,o=t.touches[0].pageY;if(this._firstTouchMove&&this.lockDirection){var r=Math.abs(i-this.x1)-Math.abs(o-this.y1);r>0&&this.vertical?this._preventMove=!0:0>r&&!this.vertical&&(this._preventMove=!0),this._firstTouchMove=!1}if(!this._preventMove){var a=(this.vertical?o-this.preY:i-this.preX)*this.sensitivity,s=this.moveFactor;this.hasMax&&this.target[this.property]>this.max&&a>0?s=this.outFactor:this.hasMin&&this.target[this.property]<this.min&&0>a&&(s=this.outFactor),a*=s,this.preX=i,this.preY=o,this.fixed||(this.target[this.property]+=a),this.change.call(this,this.target[this.property]);var c=(new Date).getTime();c-this.startTime>300&&(this.startTime=c,this.start=this.vertical?this.preY:this.preX),this.touchMove.call(this,t,this.target[this.property])}this.preventDefault&&!n(t.target,this.preventDefaultException)&&t.preventDefault(),1===e&&(null!==this.x2?(t.deltaX=i-this.x2,t.deltaY=o-this.y2):(t.deltaX=0,t.deltaY=0),this.pressMove.call(this,t,this.target[this.property])),this.x2=i,this.y2=o}},_cancel:function(t){var e=this.target[this.property];this.touchCancel.call(this,t,e),this._end(t)},to:function(t,i,n){this._to(t,this._getValue(i,600),n||e,this.change,function(t){this._calculateIndex(),this.reboundEnd.call(this,t),this.animationEnd.call(this,t)}.bind(this))},_calculateIndex:function(){this.hasMax&&this.hasMin&&(this.currentPage=Math.round((this.max-this.target[this.property])/this.step))},_end:function(t){if(this.isTouchStart){this.isTouchStart=!1;var n=this,o=this.target[this.property],r=Math.abs(t.changedTouches[0].pageX-this.x1)<30&&Math.abs(t.changedTouches[0].pageY-this.y1)<30;if(r&&this.tap.call(this,t,o),this.touchEnd.call(this,t,o,this.currentPage)===!1)return;if(this.hasMax&&o>this.max)this._to(this.max,200,e,this.change,function(t){this.reboundEnd.call(this,t),this.animationEnd.call(this,t)}.bind(this));else if(this.hasMin&&o<this.min)this._to(this.min,200,e,this.change,function(t){this.reboundEnd.call(this,t),this.animationEnd.call(this,t)}.bind(this));else if(!this.inertia||r||this._preventMove)n._correction();else{var a=(new Date).getTime()-this.startTime;if(300>a){var s=((this.vertical?t.changedTouches[0].pageY:t.changedTouches[0].pageX)-this.start)*this.sensitivity,c=Math.abs(s)/a,l=this.factor*c;this.hasMaxSpeed&&l>this.maxSpeed&&(l=this.maxSpeed);var u=o+l*l/(2*this.deceleration)*(0>s?-1:1),d=1;u<this.min?u<this.min-this.maxRegion?(d=i((o-this.min+this.springMaxRegion)/(o-u)),u=this.min-this.springMaxRegion):(d=i((o-this.min+this.springMaxRegion*(this.min-u)/this.maxRegion)/(o-u)),u=this.min-this.springMaxRegion*(this.min-u)/this.maxRegion):u>this.max&&(u>this.max+this.maxRegion?(d=i((this.max+this.springMaxRegion-o)/(u-o)),u=this.max+this.springMaxRegion):(d=i((this.max+this.springMaxRegion*(u-this.max)/this.maxRegion-o)/(u-o)),u=this.max+this.springMaxRegion*(u-this.max)/this.maxRegion));var h=Math.round(c/n.deceleration)*d;n._to(Math.round(u),h,e,n.change,function(t){n.hasMax&&n.target[n.property]>n.max?(cancelAnimationFrame(n.tickID),n._to(n.max,600,e,n.change,n.animationEnd)):n.hasMin&&n.target[n.property]<n.min?(cancelAnimationFrame(n.tickID),n._to(n.min,600,e,n.change,n.animationEnd)):n.step?n._correction():n.animationEnd.call(n,t),n.change.call(this,t)})}else n._correction()}}this.x1=this.x2=this.y1=this.y2=null},_to:function(t,e,i,n,o){if(!this.fixed){var r=this.target,a=this.property,s=r[a],c=t-s,l=new Date,u=this,d=function(){var h=new Date-l;return h>=e?(r[a]=t,n&&n.call(u,t),void(o&&o.call(u,t))):(r[a]=c*i(h/e)+s,u.tickID=requestAnimationFrame(d),void(n&&n.call(u,r[a])))};d()}},_correction:function(){if(void 0!==this.step){var t=this.target,i=this.property,n=t[i],o=Math.floor(Math.abs(n/this.step)),r=n%this.step;Math.abs(r)>this.step/2?this._to((0>n?-1:1)*(o+1)*this.step,400,e,this.change,function(t){this._calculateIndex(),this.correctionEnd.call(this,t),this.animationEnd.call(this,t)}.bind(this)):this._to((0>n?-1:1)*o*this.step,400,e,this.change,function(t){this._calculateIndex(),this.correctionEnd.call(this,t),this.animationEnd.call(this,t)}.bind(this))}}},"undefined"!=typeof module&&"object"==typeof exports?module.exports=o:window.AlloyTouch=o}(),function(){function t(t,i,n){for(var o=0,r=i.length;r>o;o++){var a=i[o];e(t,a,n)}}function e(t,e,i){Object.defineProperty(t,e,{get:function(){return this["_"+e]},set:function(t){this["_"+e]=t,i()}})}function i(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}function n(e,n){if(!e.hasOwnProperty("translateX")){var o=["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","rotateX","rotateY","rotateZ","skewX","skewY","originX","originY","originZ"],a=i(e);n||o.push("perspective"),t(e,o,function(){var t=e.matrix3d.identity().appendTransform(e.translateX,e.translateY,e.translateZ,e.scaleX,e.scaleY,e.scaleZ,e.rotateX,e.rotateY,e.rotateZ,e.skewX,e.skewY,e.originX,e.originY,e.originZ),i=(n?"":"perspective("+e.perspective+"px) ")+"matrix3d("+Array.prototype.slice.call(t.elements).join(",")+")";a?e.style.transform=e.style.msTransform=e.style.OTransform=e.style.MozTransform=e.style.webkitTransform=i:e.transform=i}),e.matrix3d=new r,n||(e.perspective=500),e.scaleX=e.scaleY=e.scaleZ=1,e.translateX=e.translateY=e.translateZ=e.rotateX=e.rotateY=e.rotateZ=e.skewX=e.skewY=e.originX=e.originY=e.originZ=0}}var o=.017453292519943295,r=function(t,e,i,n,o,r,a,s,c,l,u,d,h,p,m,f){this.elements=window.Float32Array?new Float32Array(16):[];var v=this.elements;v[0]=void 0!==t?t:1,v[4]=e||0,v[8]=i||0,v[12]=n||0,v[1]=o||0,v[5]=void 0!==r?r:1,v[9]=a||0,v[13]=s||0,v[2]=c||0,v[6]=l||0,v[10]=void 0!==u?u:1,v[14]=d||0,v[3]=h||0,v[7]=p||0,v[11]=m||0,v[15]=void 0!==f?f:1};r.prototype={set:function(t,e,i,n,o,r,a,s,c,l,u,d,h,p,m,f){var v=this.elements;return v[0]=t,v[4]=e,v[8]=i,v[12]=n,v[1]=o,v[5]=r,v[9]=a,v[13]=s,v[2]=c,v[6]=l,v[10]=u,v[14]=d,v[3]=h,v[7]=p,v[11]=m,v[15]=f,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},multiplyMatrices:function(t,e){var i=t.elements,n=this.elements,o=i[0],r=i[4],a=i[8],s=i[12],c=i[1],l=i[5],u=i[9],d=i[13],h=i[2],p=i[6],m=i[10],f=i[14],v=i[3],g=i[7],y=i[11],x=i[15],w=e[0],b=e[1],_=e[2],k=e[3],M=e[4],S=e[5],T=e[6],I=e[7],E=e[8],C=e[9],A=e[10],L=e[11],j=e[12],O=e[13],P=e[14],V=e[15];return n[0]=o*w+r*M+a*E+s*j,n[4]=o*b+r*S+a*C+s*O,n[8]=o*_+r*T+a*A+s*P,n[12]=o*k+r*I+a*L+s*V,n[1]=c*w+l*M+u*E+d*j,n[5]=c*b+l*S+u*C+d*O,n[9]=c*_+l*T+u*A+d*P,n[13]=c*k+l*I+u*L+d*V,n[2]=h*w+p*M+m*E+f*j,n[6]=h*b+p*S+m*C+f*O,n[10]=h*_+p*T+m*A+f*P,n[14]=h*k+p*I+m*L+f*V,n[3]=v*w+g*M+y*E+x*j,n[7]=v*b+g*S+y*C+x*O,n[11]=v*_+g*T+y*A+x*P,n[15]=v*k+g*I+y*L+x*V,this},_rounded:function(t,e){return e=Math.pow(10,e||15),Math.round(t*e)/e},_arrayWrap:function(t){return window.Float32Array?new Float32Array(t):t},appendTransform:function(t,e,i,n,r,a,s,c,l,u,d,h,p,m){var f=s*o,v=this._rounded(Math.cos(f)),g=this._rounded(Math.sin(f)),y=c*o,x=this._rounded(Math.cos(y)),w=this._rounded(Math.sin(y)),b=l*o,_=this._rounded(Math.cos(-1*b)),k=this._rounded(Math.sin(-1*b));return this.multiplyMatrices(this,this._arrayWrap([1,0,0,t,0,v,g,e,0,-g,v,i,0,0,0,1])),this.multiplyMatrices(this,this._arrayWrap([x,0,w,0,0,1,0,0,-w,0,x,0,0,0,0,1])),this.multiplyMatrices(this,this._arrayWrap([_*n,k*r,0,0,-k*n,_*r,0,0,0,0,1*a,0,0,0,0,1])),(u||d)&&this.multiplyMatrices(this,this._arrayWrap([this._rounded(Math.cos(u*o)),this._rounded(Math.sin(u*o)),0,0,-1*this._rounded(Math.sin(d*o)),this._rounded(Math.cos(d*o)),0,0,0,0,1,0,0,0,0,1])),(h||p||m)&&(this.elements[12]-=h*this.elements[0]+p*this.elements[4]+m*this.elements[8],this.elements[13]-=h*this.elements[1]+p*this.elements[5]+m*this.elements[9],this.elements[14]-=h*this.elements[2]+p*this.elements[6]+m*this.elements[10]),this}};var a=function(t,e,i,n,o,r){return this.a=null==t?1:t,this.b=e||0,this.c=i||0,this.d=null==n?1:n,this.tx=o||0,this.ty=r||0,this};a.prototype={identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},appendTransform:function(t,e,i,n,r,a,s,c,l){if(r%360)var u=r*o,d=Math.cos(u),h=Math.sin(u);else d=1,h=0;return a||s?(a*=o,s*=o,this.append(Math.cos(s),Math.sin(s),-Math.sin(a),Math.cos(a),t,e),this.append(d*i,h*i,-h*n,d*n,0,0)):this.append(d*i,h*i,-h*n,d*n,t,e),(c||l)&&(this.tx-=c*this.a+l*this.c,this.ty-=c*this.b+l*this.d),this},append:function(t,e,i,n,o,r){var a=this.a,s=this.b,c=this.c,l=this.d;return this.a=t*a+e*c,this.b=t*s+e*l,this.c=i*a+n*c,this.d=i*s+n*l,this.tx=o*a+r*c+this.tx,this.ty=o*s+r*l+this.ty,this},initialize:function(t,e,i,n,o,r){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=o,this.ty=r,this},setValues:function(t,e,i,n,o,r){return this.a=null==t?1:t,this.b=e||0,this.c=i||0,this.d=null==n?1:n,this.tx=o||0,this.ty=r||0,this},copy:function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)}},n.getMatrix3D=function(t){var e={translateX:0,translateY:0,translateZ:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0,originX:0,originY:0,originZ:0,scaleX:1,scaleY:1,scaleZ:1};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return(new r).identity().appendTransform(e.translateX,e.translateY,e.translateZ,e.scaleX,e.scaleY,e.scaleZ,e.rotateX,e.rotateY,e.rotateZ,e.skewX,e.skewY,e.originX,e.originY,e.originZ).elements},n.getMatrix2D=function(t){var e={translateX:0,translateY:0,rotation:0,skewX:0,skewY:0,originX:0,originY:0,scaleX:1,scaleY:1};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return(new a).identity().appendTransform(e.translateX,e.translateY,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.originX,e.originY)},"undefined"!=typeof module&&"object"==typeof exports?module.exports=n:window.Transform=n}(),function(){function t(t){for(var e="",i=100/t,n=0;t>n;n++)e+=".alloy-selector-touch"+n+" {                  position: absolute;                  left: "+n*i+"%;                  top: 0px;                  width: "+i+"%;                  height: 500px;                  z-index: 1002;                }";return'* {                  -webkit-tap-highlight-color: transparent;                  box-sizing: border-box;                }                .jmu-border-1px {                  position: relative;                }                .jmu-border-1px:after {                  display: block;                  position: absolute;                  top: 0;                  right: 0;                  bottom: 0;                  left: 0;                  -webkit-transform: scale(1);                  transform: scale(1);                  -webkit-transform-origin: 0 0;                  transform-origin: 0 0;                  content: "";                  pointer-events: none;                }                @media only screen and (-webkit-min-device-pixel-ratio: 2) {                  .jmu-border-1px:after {                    right: -100%;                    bottom: -100%;                    -webkit-transform: scale(0.5);                    transform: scale(0.5);                  }                }                .jmu-border-1px.border-bottom:after {                  border-bottom: 1px solid #cdcdcd;                }                .jmu-border-1px.border-top:after {                  border-top: 1px solid #cdcdcd;                }                .alloy-selector {                  overflow: hidden;                  position: fixed;                  top: 0;                  left: 0;                  bottom: 0;                  right: 0;                  z-index: 10000;                  padding: 0;                }                .alloy-selector-wrap {                  position: absolute;                  bottom: 0;                  left: 0;                  z-index: 1000;                  width: 100%;                  height: 250px;                  background-color: #fff;                  -webkit-transition: .3s ease-out all;                  transition: .3s ease-out all;                }                .alloy-selector-head {                  overflow: hidden;                  border-color: #bbb;                  padding: 9px;                  height: 44px;                }                .alloy-selector-button {                  display: block;                  float: right;                  width: 50px;                  font-size: 17px;                  line-height: 26px;                  text-align: right;                  color: #1d79eb;                  outline: 0;                }                .alloy-selector-button:focus,                .alloy-selector-button:hover {                  border: 0;                }                .alloy-selector-body {                  overflow: hidden;                  position: relative;                  padding: 0;                  text-align: center;                }                .alloy-selector-line {                  display: inline-block;                  position: relative;                  text-align: center;                  vertical-align: top;                  width: '+i+"%;                }                .alloy-selector-line ul {                  list-style: none;                  margin: 91px 0 0 0;                  padding: 0;                  width: 100%;                  min-height: 256px;                }                .alloy-selector-line ul li {                  width: 100%;                  height: 28px;                  line-height: 28px;                  font-size: 16px;                  white-space: nowrap;                  overflow: hidden;                  text-overflow: ellipsis;                }                .alloy-selector-mask {                  background-color: rgba(0, 0, 0, 0.4);                  position: absolute;                  z-index: 999;                  width: 100%;                  left: 0;                  top: 0;                  bottom: 0;                }                .alloy-selector-submask1 {                  background-color: rgba(255, 255, 255, 0.7);                  position: absolute;                  z-index: 1001;                  width: 100%;                  height: 89px;                  top: 0px;                  left: 0px;                }                .alloy-selector-submask2 {                  background-color: rgba(255, 255, 255, 0.7);                  position: absolute;                  z-index: 1001;                  width: 100%;                  height: 90px;                  top: 122px;                  left: 0px;                }"+e}function e(t){var e=i(),o="#"+e;t=t.replace(/\/\*[\s\S]*?\*\//g,"");var r=new RegExp("([^\r\n,{}]+)(,(?=[^}]*{)|s*{)","g");return t=t.replace(r,function(t,e,i){return e.match(/^\s*(@media|@keyframes|to|from|@font-face)/)?e+i:(e.match(/:scope/)&&(e=e.replace(/([^\s]*):scope/,function(t,e){return""===e?"> *":"> "+e})),e=e.replace(/^(\s*)/,"$1"+o+" "),e+i)}),n(t,e+"-style"),e}function i(){var t=("scoped"+Math.random()).replace("0.","");return document.getElementById(t)?i():t}function n(t,e){var i=document,n=i.createElement("style");i.getElementsByTagName("head")[0].appendChild(n),n.setAttribute("type","text/css"),n.setAttribute("id",e),c?n.styleSheet.cssText=t:n.textContent=t}function o(t,e){for(var i=[],n=0;e>n;n++){var o=document.createElement("div");o.id="alloy-selector-line-1-"+n,o.className="alloy-selector-line";var r=document.createElement("ul");o.appendChild(r),Transform(o),i.push(o),t.appendChild(o)}return i}function r(t,e){for(var i=[],n=0;e>n;n++){var o=document.createElement("div");o.className="alloy-selector-touch"+n,i.push(o),t.appendChild(o)}return i}function a(t){t=t||0;for(var e=this.nowSelected[0]||0,i=this.cache,n=0;t>n;n++)if(e=this.nowSelected[n],i=i[e],!i)return{length:0};return i}function s(){}if(!AlloyTouch)throw new Error("you need to include AlloyTouch!");if(!Transform)throw new Error("you need to include Transform!");var c=function(){for(var t,e=3,i=document.createElement("div"),n=i.getElementsByTagName("i");i.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return e>4?e:t}();AlloyTouch.MultipleSelect=function(i){function n(t){for(var e=[],i={},o=0,r=t.length;r>o;o++)e.push("<li>"+(t[o].name||t[o])+"</li>"),i[o]=t[o].list?n(t[o].list):{length:0};return i.length=o,i.content=e.join(""),i}function c(t){var e=[t],i=l.options||[];return t.forEach(function(t){i=i[t]||{},e.push(i&&i.name),i=i.list||[]}),e}this.renderTo="string"==typeof i.renderTo?document.querySelector(i.renderTo):i.renderTo,this.options=i.options,this.level=i.level||1,this.complete=i.complete||s,this.change=i.change||s;var l=this;this.nowSelected=i.selectedIndex||[],this.cache=n(this.options);for(var u=0;u<this.level;u++)this.nowSelected[u]||(this.nowSelected[u]=0);var d=e(t(this.level)),h='<div class="alloy-selector" id="'+d+'">                        <div class="alloy-selector-mask"></div>                        <div class="alloy-selector-wrap">                            <div class="alloy-selector-head jmu-border-1px border-bottom">                                <div id="alloy-selector-complete-button-1" class="alloy-selector-button">完成</div>                            </div>                            <div id="alloy-selector-body" class="alloy-selector-body">                                <div class="alloy-selector-submask1 jmu-border-1px border-bottom"></div>                                <div class="alloy-selector-submask2 jmu-border-1px border-top"></div>                            </div>                        </div>                    </div>';this.renderTo.insertAdjacentHTML("beforeEnd",h),this.widget=document.getElementById(d);var p=document.getElementById("alloy-selector-complete-button-1");p.addEventListener("touchend",function(t){l.complete.apply(l,c(l.nowSelected)),t.stopPropagation(),t.preventDefault()},!1);var m=document.getElementById("alloy-selector-body");this.list=o(m,this.level),this.touches=r(m,this.level),this.atList={};for(var f=0;f<this.level;f++){var v=a.call(this,f);this.list[f].querySelector("ul").innerHTML=v.content;var g=v[this.nowSelected[f]]?this.nowSelected[f]:0;this.nowSelected[f]=g;var y=new AlloyTouch({touch:this.touches[f],target:this.list[f],initialValue:-28*g,property:"translateY",min:-28*(v.length-1),max:0,animationEnd:function(t){return function(e){if(l.nowSelected[t]=Math.round(Math.abs(e/28)),t!==l.level-1){for(var i=t+1;i<l.level;i++){var n=a.call(l,i);l.nowSelected[i]=0,l.list[i].querySelector("ul").innerHTML=n.content||"",l.atList[i].min=-28*(n.length-1),l.list[i].translateY=0}l.change.apply(l,c(l.nowSelected))}}}(f),step:28});this.atList[f]=y}},AlloyTouch.MultipleSelect.prototype.reset=function(){for(var t=0;t<this.level;t++){this.nowSelected[t]=0;var e=a.call(this,t);this.list[t].querySelector("ul").innerHTML=e.content,this.atList[t].min=-28*(e.length-1),this.list[t].translateY=0}},AlloyTouch.MultipleSelect.prototype.show=function(){this.widget.style.visibility="visible",this.widget.style.display="block"},AlloyTouch.MultipleSelect.prototype.hide=function(){this.widget.style.visibility="hidden",this.widget.style.display="none"}}(),function(t,e,i){function n(t){return"[object Function]"===Object.prototype.toString.call(t)}function o(){}var r='<div class="masker">  <div class="pop">    <div class="ic-cancel" data-role="dismiss"></div>  </div></div>';o.prototype.open=function(t){var i=this;this.$el=$(r),t.extraCls&&this.$el.find(".pop").addClass(t.extraCls),this.$el.find(".pop").append(t.content),n(t.beforeShown)&&t.beforeShown(i.$el),$(e.body).append(this.$el),this.$el.on("click","[data-role=cancel]",function(){n(t.cancel)&&t.cancel(i.$el),i.close()}).on("click","[data-role=ok]",function(){n(t.ok)&&t.ok(i.$el),i.close()}).on("click","[data-role=dismiss]",function(){n(t.dismiss)&&t.dismiss(i.$el),i.close()})},o.prototype.close=function(){this.$el.remove()},t.Popup=o}(window,document),function(t,e,n){function o(t,e,o){for(var o=o||".",r=t.split(o),a=e.split(o),s=i=0;r[i]&&a[i];){if(r[i]>a[i]){s=1;break}if(r[i]<a[i]){s=-1;break}i++}return r[i]===n&&a[i]!==n?s=-1:r[i]!==n&&a[i]===n&&(s=1),s}t.xm||(t.xm={}),t.xm.plusMember||(t.xm.plusMember={});var r=navigator.userAgent,a=-1===location.href.indexOf("test.ximalaya.com")?"":"test",s="http://m."+("test"===a?"test.":"")+"ximalaya.com",c=s+"/down",l="http://www.ximalaya.com/link2down";t.xm.plusMember.environment=a,t.xm.plusMember.mSiteOrigin=s,t.xm.plusMember.appDownloadLink=c,t.xm.plusMember.appDownloadUniversalLink=l,t.xm.plusMember.compVersion=o;var u=t.xm.plusMember.isIOS=function(){return/(?:iPad)|(?:iPhone)/i.test(r)}(),d=(t.xm.plusMember.isAndroid=function(){return/android/i.test(r)}(),function(){var t=r.indexOf(" OS ")+4,e=r.substring(t,r.indexOf(" ",t)).replace(/_/g,".");return u&&!!~o(e,"9.0")}());t.xm.plusMember.isSupportUniversalLinks=d;var h=t.xm.plusMember.isInNative=function(){return/iting/i.test(r)}(),p=t.xm.plusMember.isInWeixin=function(){return/micromessenger/i.test(r)}();ya.ready(function(e){t.xm.plusMember.isNeedNotifyNative=function(){return h&&!!~o(e.version,"6.3.0")}()}),t.xm.plusMember.getWxConfig=function(t,e){var i="/x-thirdparty-web/weixinJssdk/config?signatureUrl="+encodeURIComponent(t)+"&thirdpartyId=17";$.ajax({url:i,dataType:"JSON",success:function(t){var i=document.createElement("script");t.jsApiList=e,i.innerHTML="wx.config("+JSON.stringify(t)+");",document.head.appendChild(i)}})};var m={wechatlogin:s+"/wx/login",h5login:s+"/login",switchAccount:s+"/passport/logout?turnTo="};t.xm.plusMember.switchAccount=function(){if(!h){var t=p?m.wechatlogin:m.h5login,e="?fromUri="+location.origin+location.pathname+"?timestamp="+Date.now();location.href=m.switchAccount+encodeURIComponent(t+e)}},t.xm.plusMember.platformIndependentLinkToAlbum=function(t,e){var i=h?"iting://open?msg_type=13&album_id="+t+"&_ka=1":s+(e?"/"+e:"")+"/album/"+t;location.href=i};var f=function(t){var e,i,n,o;return"undefined"!=typeof document.visibilityState?(e="visibilityState",i="visibilitychange"):"undefined"!=typeof document.webkitVisibilityState?(e="webkitVisibilityState",i="webkitvisibilitychange"):n=!0,n?(o=function(e){$.isFunction(t)&&t("blur"===e.type?"hidden":"visible")},window.addEventListener("blur",o,!1),window.addEventListener("focus",o,!1)):(o=function(){$.isFunction(t)&&t(document[e])},window.addEventListener(i,o,!1)),function(){n?(window.removeEventListener("blur",o,!1),window.removeEventListener("focus",o,!1)):window.removeEventListener(i,o,!1)}};t.xm.plusMember.visibilityChangeHandler=f;var v=function(t,e,i){function n(t){var e=+new Date,i=0;return setInterval(function(){var n=+new Date-e;(i++>=100||n>3e3)&&t(n>3e3)},20)}function o(t){t&&(clearTimeout(a),$.isFunction(e)&&e()),clearInterval(r),s()}var r,a,s,c,l;c=/Android/i,c.test(navigator.userAgent)?(l=document.createElement("iframe"),l.style.display="none",l.src=t,document.body.appendChild(l)):location.href=t,a=setTimeout(function(){$.isFunction(i)&&i()},3e3),r=n(o),s=f(function(t){o("hidden"===t)})};t.xm.plusMember.wakeApp=v,t.xm.plusMember.linkToNativeOnlyPage=function(t){h?location.href=t+"&_ka=1":p?location.href=d?l+"?tag=vip&open_xm="+encodeURIComponent(t)+"&android_schema="+encodeURIComponent(t):c:v(t,null,function(){location.href=d?l+"?tag=vip&open_xm="+encodeURIComponent(t):c})},t.xm.plusMember.parseCookie=function(){var t={},e=document.cookie.split("; ");return e.forEach(function(e){var i=e.split("=");i[1]&&(t[i[0]]=i[1])}),t};var g=function(t){var e,i,n,o,r=/([^=]+)=([^&]+)&/g;for(t=t.replace(/^\?|&$/g,"")+"&",e={};i=r.exec(t);)n=i[1],o=i[2],e[n]?$.isArray(e[n])?e[n].push(o):e[n]=[e[n],o]:e[n]=o;return e};t.xm.plusMember.parseParam=g,t.xm.plusMember.appendQueryString=function(t,e){var i,n,o,r,a,s;if($.isEmptyObject(e))return t;i=t.split("?")[0],n=t.split("?")[1]||"",o=g(n),r=$.extend({},o,e),a="";for(s in r)a+=s+"="+r[s],a+="&";return t=(i+"?"+a).slice(0,-1)}}(window,document),function(){function t(t,e){var i=window.location.pathname;t.test(i)&&e()}var e=xm.plusMember.isInNative,i=xm.plusMember.appendQueryString,n=xm.plusMember.parseCookie,o=xm.plusMember.parseParam,r=n(),a=r[config.TOKEN_LABEL]&&encodeURIComponent(r[config.TOKEN_LABEL]),s=!!sessionStorage.getItem("hyjack_flag");1===history.length&&sessionStorage.removeItem("hyjack_flag");var c,l={login:/\/app\/login\/?$/};if(e&&s)$(document.body).on("click","a[href^=http]",function(t){var e=this.getAttribute("href");-1!==e.indexOf("/vip/")&&(location.href=i(e,a?{token:a}:null),t.preventDefault())});else if((c=o(location.search)).token){delete c.token;var u=i(location.origin+location.pathname,c);history.replaceState?history.replaceState(null,null,u):location.replace(u)}t(l.login,function(){if(s&&history.replaceState){var t=decodeURIComponent((location.search.match(/fromUri=([^&]+)/)||[,location.origin])[1]),e=encodeURIComponent(i(t,a?{token:a}:null));history.replaceState(null,null,i(location.href,{fromUri:e}))}})}(),function(){var t=xm.plusMember.isInWeixin,e=xm.plusMember.getWxConfig;
if(t){var i=["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone","onMenuShareWeibo"];e(location.href,i);var n=window._shareData;wx.ready(function(){wx.onMenuShareAppMessage(n),wx.onMenuShareTimeline(n),wx.onMenuShareQQ(n),wx.onMenuShareQZone(n),wx.onMenuShareWeibo(n)})}}(),function(){function t(t,e){var i=window.location.pathname;t.test(i)&&e()}var e={myvip:/\/myvip(?:\/ts-\d+)?\/?$/,right:/\/right(?:\/ts-\d+)?\/\d+\/?$/,product:/\/product(?:\/ts-\d+)?\/?$/,login:/\/app\/login\/?$/};t(e.myvip,function(){xmLog("pv.create",{item:"我的巅峰会员"}),xmLog("pv.send","event",{appName:"event",serviceId:"viewItem",item:"我的巅峰会员"}),$(".j-log-login").click(function(t){xmLog("pv.send","event",{appName:"event",serviceId:"click",srcPage:"我的巅峰会员",srcModule:"立即登录"})}),$(".j-log-vipcard").click(function(t){xmLog("pv.send","event",{appName:"event",serviceId:"pageview",srcPage:"我的巅峰会员",srcModule:"我的会员卡",item:"我的会员卡"})}),$(".j-log-coupon").click(function(t){xmLog("pv.send","event",{appName:"event",serviceId:"pageview",srcPage:"我的巅峰会员",srcModule:"会员优惠券",item:"我的优惠券"})}),$(".j-log-discount-all").click(function(t){xmLog("pv.send","event",{appName:"event",serviceId:"pageview",srcPage:"我的巅峰会员",srcModule:"exclusiveDiscount",item:"会员折扣列表页",srcSubModule:"查看全部"})}),$(".j-list-link2album").on("click","[album-id]",function(t){var e=$(this),i=e.attr("album-id"),n=e.index();xmLog("pv.send","event",{appName:"event",serviceId:"pageview",srcPage:"我的巅峰会员",srcModule:"exclusiveDiscount",item:"album",itemId:i,srcPosition:n,srcSubModule:"专辑条"})}),$(".j-link2listenlist").click(function(t){xmLog("pv.send","event",{appName:"event",serviceId:"pageview",srcPage:"我的巅峰会员",srcModule:"dailyRecommond",item:"大咖读书会声音列表页",srcSubModule:"查看全部书单"})}),$(".j-list-link2track").on("click","[track-id]",function(t){var e=$(this),i=e.attr("track-id"),n=e.index();xmLog("pv.send","event",{appName:"event",serviceId:"pageview",srcPage:"我的巅峰会员",srcModule:"dailyRecommond",item:"track",itemId:i,srcPosition:n,srcSubModule:"声音条"})}),$(".j-log-member-right").on("click","> div",function(t){var e=this.querySelector(".type").textContent.trim();xmLog("pv.send","event",{appName:"event",serviceId:"pageview",srcPage:"我的巅峰会员",srcModule:"会员特权",item:"会员特权",itemTitle:e,srcSubModule:e})}),$(".j-log-open").click(function(t){xmLog("pv.send","event",{appName:"event",serviceId:"pageview",srcPage:"我的巅峰会员",srcModule:"立即开通",item:"会员购买页"})}),$(".j-log-renewal").click(function(t){xmLog("pv.send","event",{appName:"event",serviceId:"pageview",srcPage:"我的巅峰会员",srcModule:"立即续费",item:"会员购买页"})})}),t(e.right,function(){xmLog("pv.create",{item:"会员特权"}),$(".j-log-achieve-right").click(function(){var t=document.querySelector(".xm-active h2").textContent.trim();xmLog("pv.send","event",{appName:"event",serviceId:"pageview",srcPage:"会员特权",srcTitle:t,srcModule:"立刻拥有特权",item:"会员购买页"})})}),t(e.product,function(){xmLog("pv.create",{item:"会员购买页"}),$(".j-log-login").click(function(t){xmLog("pv.send","event",{appName:"event",serviceId:"click",srcPage:"会员购买页",srcModule:"立即登录"})}),$(".j-log-product-list").on("click",".j-log-btn-open",function(){var t=$(this),e=t.text().trim(),i=t.siblings(".j-log-duration").text().trim();xmLog("pv.send","event",{appName:"event",serviceId:"pageview",srcPage:"会员购买页",srcModule:e,item:"会员购买支付页",srcTitle:i,"function":"startVIPPurchase",memberType:""})})}),t(e.login,function(){xmLog("pv.create",{item:"我的会员中间页"}),$(".j-device-login").click(function(){xmLog("pv.send","event",{appName:"event",serviceId:"click",srcPage:"我的会员中间页",srcModule:"使用设备登陆"})}),$(".j-login").click(function(){xmLog("pv.send","event",{appName:"event",serviceId:"click",srcPage:"我的会员中间页",srcModule:"账号登录"})}),document.body.addEventListener("click",function(t){var e=t.target.getAttribute("data-role");if(e){var i="cancel"===e?"继续使用设备登陆":"改用账号登录";xmLog("pv.send","event",{appName:"event",serviceId:"click",srcPage:"我的会员中间页",srcModule:i})}},!0)})}(),function(){function t(t,e){var i=window.location.pathname;t.test(i)&&e()}var e={switchAccount:/\/(?:product)|(?:myvip)(?:\/ts-\d+)?\/?$/},i=xm.plusMember.isInNative,n=(xm.plusMember.isInWeixin,xm.plusMember.linkToNativeOnlyPage),o=xm.plusMember.isNeedNotifyNative;t(e.switchAccount,function(){$(".login-type > span").addClass("j-switch-account"),o&&function(){var t=$(".j-vip-status").data().vipStatus;ya.ready(function(){t&&ya.notify({type:"vip",isVip:t})})}(),$(".j-login").click(function(t){t.preventDefault(),i?ya.login(function(t){location.reload()}):location.href=this.getAttribute("href")});var t=$(".j-switch-account");t.click(function(){(new Popup).open({content:'<h2 class="title">切换账号</h2><p class="desc">切换账号需要退出当前帐号，确定要退出登录吗？</p><div class="btn-panel">  <a class="btn btn-cancel" data-role="dismiss">取消</a>  <a class="btn btn-confirm" data-role="ok">确定</a></div>',extraCls:"pop-change-account",ok:function(){xm.plusMember.switchAccount()}})}),$(".j-link2listenlist").click(function(t){t.preventDefault();var e="iting://open?msg_type=51";n(e)}),$(".j-list-link2track").on("click","[track-id]",function(){var t=this.getAttribute("track-id"),e="iting://open?msg_type=11&track_id="+t;n(e)}),$(".j-list-link2album").on("click","[album-id]",function(){xm.plusMember.platformIndependentLinkToAlbum(this.getAttribute("album-id"))})});var r=$(".j-tabItem"),a=$(".j-tabContent");r.on("click",function(){var t=$(this);t.addClass("on").siblings().removeClass("on"),a.addClass("hidden").eq(t.index()).removeClass("hidden")})}(),function(){function t(t,e){var i=window.location.pathname;t.test(i)&&e()}var e={right:/\/right\/\d+(?:\/ts-\d+)?\/?$/};t(e.right,function(){var t=$(".list-rights"),e=t.attr("data-active")||0;t.xmSwiper({active:e&&e-1}),$(".more-link-book").click(function(t){t.preventDefault();var e="iting://open?msg_type=51";xm.plusMember.linkToNativeOnlyPage(e)})})}(),function(){function t(t,e){var i=window.location.pathname;t.test(i)&&e()}function e(t,e,i){var o,r=$(t);return e.hasClass("is-loading")?!1:"false"===r.attr("data-more")?(e.addClass("is-end").off("click.loadMore"),i.clear(),!1):(o=r.attr("current-page-no"),e.addClass("is-loading"),void $.ajax({url:n.loadMore+ ++o+"?timestamp="+Date.now()}).done(function(t){return t.pageNo!==o?!1:(r.append(t.items),r.attr("current-page-no",o),r.attr("data-more",t.hasMore),void(t.hasMore||(e.addClass("is-end").off("click.loadMore"),i.clear())))}).always(function(){e.removeClass("is-loading")}))}var i={discountalbum:/\/discountalbum(?:\/ts-\d+)?\/?$/},n={loadMore:"/vip/discountalbum/page/"},o=xm.util.loadMore;t(i.discountalbum,function(){var t,i,n;t=$(".j-list-load-more"),i=$(".j-indicator-load-more"),t.length&&!i.hasClass("hidden")&&(n=new o(t),n.on("xmlm-load-triggered",function(o,r){e(t,i,n)}),i.on("click.loadMore",function(){e(t,i,n)})),t.on("click","[album-id]",function(){xm.plusMember.platformIndependentLinkToAlbum(this.getAttribute("album-id"))})})}(),function(){function t(t,e){var i=window.location.pathname;t.test(i)&&e()}var e={vipcard:/\/vipcard(?:\/ts-\d+)?\/?$/,rPhone:/^1\d{10}$/},i=xm.util.toast,n={completeVipInfo:"/vip/complete/vipinfo"};t(e.vipcard,function(){var t=$(".masker");if(t.length){t.on("click",".ic-cancel",function(){history.back()});var o,r=$(".j-submit-vip-info"),a=$(".j-phone-number"),s=$(".j-select-address");r.click(function(){var t,r=a.val().trim();if(!o){if(""===r)return i("请输入手机号码"),void a.focus();if(!e.rPhone.test(r))return i("请输入正确的手机号码"),void a.focus();if(t=s.data(),$.isEmptyObject(t))return void i("请选择地址");t.phoneNo=r,o=!0,$.ajax({url:n.completeVipInfo,type:"POST",dataType:"json",data:t}).done(function(){location.reload()}).fail(function(t){i(t.responseJSON&&t.responseJSON.message||"出错啦，刷新页面再试试吧")}).always(function(){o=!1})}});var c,l=$("<div></div>");l.attr("id","selectCtn").appendTo(document.body),l.on("click",".alloy-selector-mask",function(){c.hide()}).on("touchmove",".alloy-selector-mask, .alloy-selector-head",function(){return!1}),s.click(function(t){var e=this;setTimeout(function(){c?c.show():c=new AlloyTouch.MultipleSelect({options:area_select_data,level:3,renderTo:"#selectCtn",selectedIndex:[0,0,0],complete:function(t){var i=this.options,n=i[t[0]],o=n.name,r=n.list[t[1]],a=r.name,l=r.list[t[2]];e.dataset.province=o,e.dataset.city=a,e.dataset.district=l,s.text(o+"省"+a+"市"+l),c.hide()}})},300)})}})}(),function(){function t(t,e){var i=window.location.pathname;t.test(i)&&e()}var e={login:/\/app\/login\/?$/};t(e.login,function(){function t(){ya.login(function(t){xm.plusMember.isIOS&&s&&sessionStorage.setItem("hyjack_flag",1),document.cookie=config.TOKEN_LABEL+"="+t.uid+"&"+t.token+";path=/;domain=.ximalaya.com",location.replace(decodeURIComponent(r))})}function e(){ya.dLogin(function(t){document.cookie=config.DEVICE_TOKEN_LABEL+"="+t.uid+"&"+t.token+";path=/;domain=.ximalaya.com",location.replace(decodeURIComponent(r))})}function i(t){""===t&&(t="empty");var e=document.createElement("p");e.appendChild(document.createTextNode(t)),c.appendChild(e)}var n=$(".j-login"),o=$(".j-device-login"),r=(location.search.match(/fromUri=([^&]+)/)||[,"/"])[1],a=xm.plusMember.parseCookie(),s=a[config.TOKEN_LABEL]||a[config.DEVICE_TOKEN_LABEL];n.click(t),o.click(function(){(new Popup).open({content:'<h2 class="title">设备登陆须知</h2><p class="tit">使用设备登录后所充值的喜点、购买的内容，仅限登录本设备时可用。</p><p class="tit">如您更换设备或者使用已有账号登录，则无法使用在设备登录时使用时所充值的喜点和购买的内容。</p><div class="btn-panel">  <a data-role="cancel">继续设备登录</a>  <a data-role="ok">改用账号登录</a></div>',extraCls:"pop-login",closeable:!1,ok:function(){t()},cancel:function(){e()}})}),a[config.TOKEN_LABEL]?n.click():a[config.DEVICE_TOKEN_LABEL]&&location.replace(decodeURIComponent(r));var c=document.createElement("div"),l=getComputedStyle(document.body)["background-color"];c.style.color=l,c.style.position="absolute",c.style.top=0,c.style.zIndex=-1,document.body.appendChild(c),i(this===top),i(this.location.href),i(this.document.cookie)})}(),function(){function t(t,e){var i=window.location.pathname;t.test(i)&&e()}var e={helpCenter:/\/vip\/help\/ts/};t(e.helpCenter,function(){var t=$(".j-toggle");t.on("click",function(){var t=$(this);t.parents(".help-center-q-outer").toggleClass("open")})})}();